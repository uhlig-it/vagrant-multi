#
# sudo service haproxy reload to make changes effective
#

global
  daemon
  maxconn 256
  log /dev/log local0

defaults
  mode http
  log global
  timeout connect 1000ms
  timeout client 1000ms
  timeout server 1000ms

frontend http-in
  bind *:80
  default_backend web_server

backend web_server
  mode http
  balance roundrobin
  option httpchk GET /

  # TODO Have these lines generated from the Vagrantfile, or a provisioner
  server web0 192.168.42.20:4567 check
  server web1 192.168.42.21:4567 check
